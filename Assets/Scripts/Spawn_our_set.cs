using UnityEngine;

public class Spawn_our_set : MonoBehaviour
{
    public GameObject objectToSpawn;      // 소환할 프리팹
    public BoxCollider2D spawnArea;       // 스폰 범위 기준
    public float spawnInterval = 3f;      // 소환 주기
    public float lifetime = 5f;           // 소환 후 유지 시간
    public float fixedX = 111f;           // 고정 X 위치
    public float fixedY = 0f;             // 고정 Y 위치
    public float Attack = 1f;
    public float health = 1f;
    [Tooltip("소환되는 오브젝트의 태그를 지정하세요.")]
    public string spawnTag = "Team_our";  // 인스펙터에서 지정할 태그

    public int upgradeScore = 0; // Upgrade 점수 추가

    void SpawnObject()
    {
        int spawnCount = 1;
        if (upgradeScore == 1)
            spawnCount = 2;
        else if (upgradeScore == 2)
            spawnCount = 3;

        for (int i = 0; i < spawnCount; i++)
        {
            float y = fixedY + 36.5f * i;
            Vector2 spawnPos = new Vector2(fixedX, y);

            GameObject obj = Instantiate(objectToSpawn, spawnPos, Quaternion.identity);
            obj.transform.localScale = new Vector3(30f, 30f, 1f);
            obj.tag = spawnTag;
            Destroy(obj, lifetime);
        }
    }

    void Start()
    {
        // 시작 후 일정 시간마다 SpawnObject() 실행
        InvokeRepeating(nameof(SpawnObject), 0f, spawnInterval);
    }
}
